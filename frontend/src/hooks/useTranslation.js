import { createContext, useContext, useState, useCallback } from "react";

const translations = {
  fr: {
    // Navigation & Common
    myTasks: "Mes Tâches",
    list: "Liste",
    kanban: "Kanban",
    calendar: "Calendrier",
    stats: "Statistiques",
    profile: "Profil",
    logout: "Déconnexion",
    welcome: "Bienvenue",
    newTask: "Nouvelle tâche",
    notifications: "Notifications",
    refresh: "Rafraîchir",

    // Task Status
    todo: "À faire",
    inProgress: "En cours",
    done: "Terminé",
    review: "En révision",
    in_progress: "En cours", // variante de "inProgress" si besoin

    // Priority Levels
    low: "Basse",
    medium: "Moyenne",
    high: "Haute",

    // Filters
    allStatuses: "Tous les statuts",
    allPriorities: "Toutes les priorités",

    // Task List
    taskList: "Liste des tâches",
    loadingTasks: "Chargement des tâches...",
    cannotLoadTasks: "Impossible de charger les tâches",
    taskListUpdated: "Liste des tâches mise à jour",
    statusUpdated: "Statut mis à jour",
    taskMovedTo: "La tâche a été déplacée vers {status}",
    cannotUpdateStatus: "Impossible de mettre à jour le statut",
    taskDeleted: "Tâche supprimée",
    taskDeletedSuccess: "La tâche a été supprimée avec succès",
    cannotDeleteTask: "Impossible de supprimer la tâche",
    taskUpdatedSuccess: "La tâche a été modifiée avec succès",
    noTasksFound: "Aucune tâche trouvée",
    sortBy: "Trier par...",
    filterByStatus: "Filtrer par statut",
    filterByPriority: "Filtrer par priorité",
    deadline: "Date limite",
    priority: "Priorité",
    status: "Statut",
    edit: "Modifier",
    delete: "Supprimer",
    advanceStatus: "Avancer le statut",
    estimated: "estimées",
    tryAgain: "Réessayer",

    // Common
    success: "Succès",
    error: "Erreur",

    // Calendar
    taskCalendar: "Calendrier des tâches",
    tasksForDate: "Tâches pour le",
    noTasksForDate: "Aucune tâche pour cette date",

    // Stats
    completedTasks: "Tâches terminées",
    tasksInProgress: "En cours",
    overdueTasks: "En retard",
    averageTime: "Temps moyen",
    completedTasksDesc: "Progression globale des tâches",
    tasksInProgressDesc: "Tâches en cours de traitement",
    overdueTasksDesc: "Tâches dépassant l'échéance",
    averageCompletionTimeDesc: "Temps moyen de réalisation",
    thisMonth: "Ce mois",
    currently: "Actuellement",
    toProcess: "À traiter",
    perTask: "Par tâche",
    loadingStats: "Chargement des statistiques...",
    tasksByPriority: "Distribution par priorité",
    currentStatus: "État actuel des tâches",
    last7Days: "Les 7 derniers jours",
    weeklyProgressDesc: "Progrès hebdomadaire",
    productivityDesc: "Mesures de productivité",
    efficiency: "Efficacité",
    memberEfficiency: "Efficacité des membres",
    productivityInsights: "Aperçu de la productivité",
    keyMetrics: "Métriques clés",
    avgTimePerTask: "Temps moyen par tâche",
    daysPerTask: "Jours par tâche",

    // Profile
    userProfile: "Profil Utilisateur",
    name: "Nom",
    email: "Email",
    role: "Rôle",
    memberSince: "Membre depuis",
    loadingProfile: "Chargement du profil...",
    profileNotFound: "Profil non trouvé",
    unauthenticatedUser: "Utilisateur non authentifié",
    cannotLoadProfile: "Impossible de charger le profil",
    retry: "Réessayer",

    // Kanban
    errorLoadingTasks: "Une erreur est survenue lors du chargement des tâches",
    statusUpdateSuccess: "Le statut de la tâche a été mis à jour",
    statusUpdateError: "Impossible de mettre à jour le statut de la tâche",
    noTasks: "Aucune tâche",
    dragHint: "Utilisez la souris pour glisser-déposer les tâches entre les colonnes",

    // Task Creation Form
    title: "Titre",
    description: "Description",
    estimatedTime: "Temps estimé (heures)",
    assignedTo: "Assigné à",
    unassigned: "Non assigné",
    cancel: "Annuler",
    creating: "Création...",
    modifying: "Modification...",
    createTask: "Créer la tâche",
    editTask: "Modifier la tâche",
    taskCreated: "Tâche créée avec succès",
    taskModified: "Tâche modifiée avec succès",
    cannotCreateTask: "Impossible de créer la tâche",
    cannotModifyTask: "Impossible de modifier la tâche",
    errorLoadingUsers: "Erreur lors du chargement des utilisateurs",
    taskAssignedNotification: '{userName} vous a assigné la tâche "{taskTitle}"',

    // Login Form
    login: "Connexion",
    loginDescription: "Connectez-vous à votre compte pour accéder à vos tâches",
    emailPlaceholder: "exemple@email.com",
    password: "Mot de passe",
    loggingIn: "Connexion en cours...",
    loginButton: "Se connecter",
    loginError: "Échec de la connexion",

    // Register Form
    createAccount: "Créer un compte",
    registerDescription: "Remplissez le formulaire ci-dessous pour créer votre compte",
    username: "Nom d'utilisateur",
    usernamePlaceholder: "Entrez votre nom d'utilisateur",
    emailPlaceholder: "Entrez votre email",
    passwordPlaceholder: "Créez votre mot de passe",
    confirmPassword: "Confirmer le mot de passe",
    confirmPasswordPlaceholder: "Confirmez votre mot de passe",
    createAccountButton: "Créer mon compte",
    alreadyHaveAccount: "Vous avez déjà un compte ?",
    loginLink: "Connectez-vous",
    passwordMismatch: "Les mots de passe ne correspondent pas",
    registrationError: "Une erreur est survenue lors de l'inscription",

    // New translations (Analytics, Admin, etc.)
    taskAnalytics: "Analyse des tâches",
    analyticsDescription: "Vue d'ensemble détaillée de la progression et de la performance",
    selectTimeRange: "Sélectionner la période",
    lastWeek: "Dernière semaine",
    lastMonth: "Dernier mois",
    lastYear: "Dernière année",
    completion: "Complétion",
    timeline: "Chronologie",
    team: "Équipe",
    taskTimeline: "Chronologie des tâches",
    weeklyProgress: "Progrès hebdomadaire",
    productivity: "Productivité",
    tasksCreated: "Tâches créées",
    tasksCompleted: "Tâches terminées",
    completionRate: "Taux de complétion",
    averageTasksPerDay: "Tâches moyennes par jour",
    created: "Créées",
    completed: "Terminées",
    fromLastPeriod: "par rapport à la période précédente",
    priorityDistribution: "Distribution des priorités",
    tasksByPriority: "Tâches par priorité",
    statusBreakdown: "Répartition par statut",
    currentStatus: "État actuel",
    days: "jours",
    tasks: "tâches",
    noAccount: "Vous n'avez pas de compte ?",
    createAccountLink: "Créer un compte",
    adminCreateUser: "Créer un nouvel utilisateur",
    adminCreateUserDescription: "Créez un nouveau compte utilisateur avec des permissions spécifiques",
    userRole: "Rôle de l'utilisateur",
    selectRole: "Sélectionner un rôle",
    roleUser: "Utilisateur",
    roleAdmin: "Administrateur",
    creatingUser: "Création en cours...",
    createUser: "Créer l'utilisateur",
    userCreatedSuccess: "Utilisateur créé avec succès",
    userCreationError: "Erreur lors de la création de l'utilisateur",
    unauthorizedAccess: "Accès non autorisé. Vous n'avez pas les permissions nécessaires.",
    adminArea: "Zone administrative",
    adminOnly: "Cette section est réservée aux administrateurs.",
    userManagement: "Gestion des utilisateurs",
    userManagementDescription: "Gérer les rôles et les permissions des utilisateurs",
    searchUsers: "Rechercher des utilisateurs...",
    makeAdmin: "Promouvoir admin",
    removeAdmin: "Retirer admin",
    userPromoted: "L'utilisateur a été promu administrateur",
    userDemoted: "Les droits d'administrateur ont été retirés",
    cannotPromoteUser: "Impossible de promouvoir l'utilisateur",
    cannotDemoteUser: "Impossible de rétrograder l'utilisateur",
    noUsers: "Aucun utilisateur trouvé",
    noUsersFound: "Aucun utilisateur ne correspond à votre recherche",
    cannotLoadUsers: "Impossible de charger la liste des utilisateurs",
    retry: "Réessayer",
  },
  en: {
    // Navigation & Common
    myTasks: "My Tasks",
    list: "List",
    kanban: "Kanban",
    calendar: "Calendar",
    stats: "Statistics",
    profile: "Profile",
    logout: "Logout",
    welcome: "Welcome",
    newTask: "New Task",
    notifications: "Notifications",
    refresh: "Refresh",

    // Task Status
    todo: "To Do",
    inProgress: "In Progress",
    done: "Done",
    review: "In Review",
    in_progress: "In Progress",

    // Priority Levels
    low: "Low",
    medium: "Medium",
    high: "High",

    // Filters
    allStatuses: "All Statuses",
    allPriorities: "All Priorities",

    // Task List
    taskList: "Task List",
    loadingTasks: "Loading tasks...",
    cannotLoadTasks: "Cannot load tasks",
    taskListUpdated: "Task list updated",
    statusUpdated: "Status updated",
    taskMovedTo: "Task moved to {status}",
    cannotUpdateStatus: "Cannot update status",
    taskDeleted: "Task deleted",
    taskDeletedSuccess: "Task successfully deleted",
    cannotDeleteTask: "Cannot delete task",
    taskUpdatedSuccess: "Task successfully updated",
    noTasksFound: "No tasks found",
    sortBy: "Sort by...",
    filterByStatus: "Filter by status",
    filterByPriority: "Filter by priority",
    deadline: "Deadline",
    priority: "Priority",
    status: "Status",
    edit: "Edit",
    delete: "Delete",
    advanceStatus: "Advance status",
    estimated: "estimated",
    tryAgain: "Try again",

    // Common
    success: "Success",
    error: "Error",

    // Calendar
    taskCalendar: "Task Calendar",
    tasksForDate: "Tasks for",
    noTasksForDate: "No tasks for this date",

    // Stats
    completedTasks: "Completed Tasks",
    tasksInProgress: "In Progress",
    overdueTasks: "Overdue",
    averageTime: "Average Time",
    completedTasksDesc: "Completed tasks",
    tasksInProgressDesc: "Tasks in progress",
    overdueTasksDesc: "Tasks past deadline",
    averageCompletionTimeDesc: "Average completion time",
    thisMonth: "This month",
    currently: "Currently",
    toProcess: "To process",
    perTask: "Per task",
    loadingStats: "Loading statistics...",
    tasksByPriority: "Tasks by Priority",
    currentStatus: "Current Status",
    last7Days: "Last 7 days",
    weeklyProgressDesc: "Weekly progress",
    productivityDesc: "Productivity metrics",
    efficiency: "Efficiency",
    memberEfficiency: "Member Efficiency",
    productivityInsights: "Productivity Insights",
    keyMetrics: "Key Metrics",
    avgTimePerTask: "Average Time per Task",
    daysPerTask: "Days per Task",

    // Profile
    userProfile: "User Profile",
    name: "Name",
    email: "Email",
    role: "Role",
    memberSince: "Member since",
    loadingProfile: "Loading profile...",
    profileNotFound: "Profile not found",
    unauthenticatedUser: "Unauthenticated user",
    cannotLoadProfile: "Cannot load profile",
    retry: "Retry",

    // Kanban
    errorLoadingTasks: "An error occurred while loading tasks",
    statusUpdateSuccess: "Task status has been updated",
    statusUpdateError: "Cannot update task status",
    noTasks: "No tasks",
    dragHint: "Use the mouse to drag and drop tasks between columns",

    // Task Creation Form
    title: "Title",
    description: "Description",
    estimatedTime: "Estimated time (hours)",
    assignedTo: "Assigned to",
    unassigned: "Unassigned",
    cancel: "Cancel",
    creating: "Creating...",
    modifying: "Modifying...",
    createTask: "Create task",
    editTask: "Edit task",
    taskCreated: "Task created successfully",
    taskModified: "Task successfully updated",
    cannotCreateTask: "Cannot create task",
    cannotModifyTask: "Cannot modify task",
    errorLoadingUsers: "Error loading users",
    taskAssignedNotification: '{userName} assigned you the task "{taskTitle}"',

    // Login Form
    login: "Login",
    loginDescription: "Sign in to your account to access your tasks",
    emailPlaceholder: "example@email.com",
    password: "Password",
    loggingIn: "Logging in...",
    loginButton: "Sign in",
    loginError: "Login failed",

    // Register Form
    createAccount: "Create Account",
    registerDescription: "Fill in the form below to create your account",
    username: "Username",
    usernamePlaceholder: "Enter your username",
    emailPlaceholder: "Enter your email",
    passwordPlaceholder: "Create your password",
    confirmPassword: "Confirm Password",
    confirmPasswordPlaceholder: "Confirm your password",
    createAccountButton: "Create my account",
    alreadyHaveAccount: "Already have an account?",
    loginLink: "Sign in",
    passwordMismatch: "Passwords do not match",
    registrationError: "An error occurred during registration",

    // New translations (Analytics, Admin, etc.)
    taskAnalytics: "Task Analytics",
    analyticsDescription: "Detailed overview of progress and performance",
    selectTimeRange: "Select time range",
    lastWeek: "Last week",
    lastMonth: "Last month",
    lastYear: "Last year",
    completion: "Completion",
    timeline: "Timeline",
    team: "Team",
    taskTimeline: "Task Timeline",
    weeklyProgress: "Weekly Progress",
    productivity: "Productivity",
    tasksCreated: "Tasks Created",
    tasksCompleted: "Tasks Completed",
    completionRate: "Completion Rate",
    averageTasksPerDay: "Average Tasks per Day",
    created: "Created",
    completed: "Completed",
    fromLastPeriod: "from last period",
    priorityDistribution: "Priority Distribution",
    tasksByPriority: "Tasks by Priority",
    statusBreakdown: "Status Breakdown",
    currentStatus: "Current Status",
    days: "days",
    tasks: "tasks",
    noAccount: "Don't have an account?",
    createAccountLink: "Create account",
    adminCreateUser: "Create New User",
    adminCreateUserDescription: "Create a new user account with specific permissions",
    userRole: "User Role",
    selectRole: "Select role",
    roleUser: "User",
    roleAdmin: "Administrator",
    creatingUser: "Creating user...",
    createUser: "Create User",
    userCreatedSuccess: "User created successfully",
    userCreationError: "Error creating user",
    unauthorizedAccess: "Unauthorized access. You don't have the required permissions.",
    adminArea: "Administrative Area",
    adminOnly: "This section is restricted to administrators only.",
    userManagement: "User Management",
    userManagementDescription: "Manage user roles and permissions",
    searchUsers: "Search users...",
    makeAdmin: "Promote to admin",
    removeAdmin: "Remove admin",
    userPromoted: "User promoted to administrator",
    userDemoted: "Admin rights removed",
    cannotPromoteUser: "Cannot promote user",
    cannotDemoteUser: "Cannot demote user",
    noUsers: "No users found",
    noUsersFound: "No users match your search",
    cannotLoadUsers: "Cannot load user list",
    retry: "Retry",
  },
  ro: {
    // Navigation & Common
    myTasks: "Sarcinile mele",
    list: "Listă",
    kanban: "Kanban",
    calendar: "Calendar",
    stats: "Statistici",
    profile: "Profil",
    logout: "Deconectare",
    welcome: "Bun venit",
    newTask: "Sarcină nouă",
    notifications: "Notificări",
    refresh: "Reîmprospătare",

    // Task Status
    todo: "De făcut",
    inProgress: "În desfășurare",
    done: "Terminat",
    review: "În revizuire",
    in_progress: "În desfășurare",

    // Priority Levels
    low: "Scăzută",
    medium: "Medie",
    high: "Ridicată",

    // Filters
    allStatuses: "Toate statusurile",
    allPriorities: "Toate prioritățile",

    // Task List
    taskList: "Lista de sarcini",
    loadingTasks: "Se încarcă sarcinile...",
    cannotLoadTasks: "Nu se pot încărca sarcinile",
    taskListUpdated: "Lista de sarcini actualizată",
    statusUpdated: "Status actualizat",
    taskMovedTo: "Sarcina a fost mutată la {status}",
    cannotUpdateStatus: "Nu se poate actualiza statusul",
    taskDeleted: "Sarcină ștearsă",
    taskDeletedSuccess: "Sarcina a fost ștearsă cu succes",
    cannotDeleteTask: "Nu se poate șterge sarcina",
    taskUpdatedSuccess: "Sarcina a fost actualizată cu succes",
    sortBy: "Sortare după...",
    filterByStatus: "Filtrare după status",
    filterByPriority: "Filtrare după prioritate",
    deadline: "Termen limită",
    priority: "Prioritate",
    status: "Status",
    edit: "Editare",
    delete: "Ștergere",
    advanceStatus: "Avansare status",
    estimated: "estimate",
    tryAgain: "Încearcă din nou",

    // Common
    success: "Succes",
    error: "Eroare",

    // Calendar
    taskCalendar: "Calendar sarcini",
    tasksForDate: "Sarcini pentru",
    noTasksForDate: "Nu există sarcini pentru această dată",

    // Stats
    completedTasks: "Sarcini finalizate",
    tasksInProgress: "În desfășurare",
    overdueTasks: "Întârziate",
    averageTime: "Timp mediu",
    completedTasksDesc: "Sarcini completate",
    tasksInProgressDesc: "Sarcini în desfășurare",
    overdueTasksDesc: "Sarcini care depășesc termenul limită",
    averageCompletionTimeDesc: "Timp mediu de finalizare",
    thisMonth: "Luna aceasta",
    currently: "În prezent",
    toProcess: "De procesat",
    perTask: "Per sarcină",
    loadingStats: "Se încarcă statisticile...",
    tasksByPriority: "Sarcini după Prioritate",
    currentStatus: "Status Curent",
    last7Days: "Ultimele 7 zile",
    weeklyProgressDesc: "Progres Săptămânal",
    productivityDesc: "Măsuri de productivitate",
    efficiency: "Eficiență",
    memberEfficiency: "Eficiența Membrilor",
    productivityInsights: "Informații Productivitate",
    keyMetrics: "Metrici Cheie",
    avgTimePerTask: "Timp Mediu per Sarcină",
    daysPerTask: "Zile per Sarcină",

    // Profile
    userProfile: "Profil utilizator",
    name: "Nume",
    email: "Email",
    role: "Rol",
    memberSince: "Membru din",
    loadingProfile: "Se încarcă profilul...",
    profileNotFound: "Profilul nu a fost găsit",
    unauthenticatedUser: "Utilizator neautentificat",
    cannotLoadProfile: "Nu se poate încărca profilul",
    retry: "Reîncearcă",

    // Kanban
    errorLoadingTasks: "A apărut o eroare la încărcarea sarcinilor",
    statusUpdateSuccess: "Statusul sarcinii a fost actualizat",
    statusUpdateError: "Nu se poate actualiza statusul sarcinii",
    noTasks: "Nu există sarcini",
    dragHint: "Folosiți mouse-ul pentru a trage și plasa sarcinile între coloane",

    // Task Creation Form
    title: "Titlu",
    description: "Descriere",
    estimatedTime: "Timp estimat (ore)",
    assignedTo: "Atribuit către",
    unassigned: "Neatribuit",
    cancel: "Anulare",
    creating: "Se creează...",
    modifying: "Se modifică...",
    createTask: "Creare sarcină",
    editTask: "Editare sarcină",
    taskCreated: "Sarcina a fost creată cu succes",
    taskModified: "Sarcina a fost modificată cu succes",
    cannotCreateTask: "Nu se poate crea sarcina",
    cannotModifyTask: "Nu se poate modifica sarcina",
    errorLoadingUsers: "Eroare la încărcarea utilizatorilor",
    taskAssignedNotification: '{userName} v-a atribuit sarcina "{taskTitle}"',

    // Login Form
    login: "Autentificare",
    loginDescription: "Conectați-vă la contul dvs. pentru a accesa sarcinile",
    emailPlaceholder: "exemplu@email.com",
    password: "Parolă",
    loggingIn: "Autentificare în curs...",
    loginButton: "Autentificare",
    loginError: "Autentificare eșuată",

    // Register Form
    createAccount: "Creare cont",
    registerDescription: "Completați formularul de mai jos pentru a vă crea contul",
    username: "Nume utilizator",
    usernamePlaceholder: "Introduceți numele de utilizator",
    emailPlaceholder: "Introduceți emailul",
    passwordPlaceholder: "Creați parola",
    confirmPassword: "Confirmare parolă",
    confirmPasswordPlaceholder: "Confirmați parola",
    createAccountButton: "Creare cont",
    alreadyHaveAccount: "Aveți deja un cont?",
    loginLink: "Autentificare",
    passwordMismatch: "Parolele nu corespund",
    registrationError: "A apărut o eroare la înregistrare",

    // New translations (Analytics, Admin, etc.)
    taskAnalytics: "Analiza Sarcinilor",
    analyticsDescription: "Prezentare detaliată a progresului și performanței",
    selectTimeRange: "Selectați perioada",
    lastWeek: "Ultima săptămână",
    lastMonth: "Ultima lună",
    lastYear: "Ultimul an",
    completion: "Finalizare",
    timeline: "Cronologie",
    team: "Echipă",
    taskTimeline: "Cronologia Sarcinilor",
    weeklyProgress: "Progres Săptămânal",
    productivity: "Productivitate",
    tasksCreated: "Sarcini Create",
    tasksCompleted: "Sarcini Finalizate",
    completionRate: "Rata de Finalizare",
    averageTasksPerDay: "Media Sarcinilor pe Zi",
    created: "Create",
    completed: "Finalizate",
    fromLastPeriod: "față de perioada anterioară",
    priorityDistribution: "Distribuția Priorităților",
    tasksByPriority: "Sarcini după Prioritate",
    statusBreakdown: "Defalcare după Status",
    currentStatus: "Status Curent",
    days: "zile",
    tasks: "sarcini",
    noAccount: "Nu aveți cont?",
    createAccountLink: "Creați cont",
    adminCreateUser: "Creare Utilizator Nou",
    adminCreateUserDescription: "Creați un cont nou de utilizator cu permisiuni specifice",
    userRole: "Rol Utilizator",
    selectRole: "Selectați rolul",
    roleUser: "Utilizator",
    roleAdmin: "Administrator",
    creatingUser: "Se creează utilizatorul...",
    createUser: "Creare Utilizator",
    userCreatedSuccess: "Utilizator creat cu succes",
    userCreationError: "Eroare la crearea utilizatorului",
    unauthorizedAccess: "Acces neautorizat. Nu aveți permisiunile necesare.",
    adminArea: "Zonă administrativă",
    adminOnly: "Această secțiune este restricționată doar pentru administratori.",
    userManagement: "Gestionarea Utilizatorilor",
    userManagementDescription: "Gestionați rolurile și permisiunile utilizatorilor",
    searchUsers: "Căutați utilizatori...",
    makeAdmin: "Promovați la administrator",
    removeAdmin: "Eliminați administratorul",
    userPromoted: "Utilizatorul a fost promovat la administrator",
    userDemoted: "Drepturile de administrator au fost retrase",
    cannotPromoteUser: "Nu se poate promova utilizatorul",
    cannotDemoteUser: "Nu se poate retrograda utilizatorul",
    noUsers: "Niciun utilizator găsit",
    noUsersFound: "Niciun utilizator nu corespunde căutării dvs.",
    cannotLoadUsers: "Nu se poate încărca lista de utilizatori",
    retry: "Încercați din nou",
  },
};

const LanguageContext = createContext();

function LanguageProvider({ children }) {
  const [language, setLanguage] = useState("fr");

  const t = useCallback(
    (key) => {
      return translations[language][key] || key;
    },
    [language]
  );

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

function useTranslation() {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error("useTranslation must be used within a LanguageProvider");
  }
  return context;
}

export { LanguageProvider, useTranslation };
